<!DOCTYPE html>
<html>
<head>
  <title>Global Real-Time LED Control</title>

  <!-- Firebase v9 -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

    // üî¥ REPLACE WITH YOUR FIREBASE CONFIG
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      databaseURL: "https://YOUR_PROJECT.firebaseio.com",
      projectId: "YOUR_PROJECT"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const ledRef = ref(db, "ledState");

    let blinkTimer = null;

    function updateLED(state) {
      const led = document.getElementById("led");
      clearInterval(blinkTimer);

      if (state === "ON") {
        led.style.background = "green";
      } 
      else if (state === "OFF") {
        led.style.background = "red";
      } 
      else if (state === "BLINK") {
        let on = false;
        blinkTimer = setInterval(() => {
          led.style.background = on ? "blue" : "#ccc";
          on = !on;
        }, 500);
      }
    }

    // üîÅ REAL-TIME LISTENER (THIS IS THE KEY)
    onValue(ledRef, snapshot => {
      updateLED(snapshot.val());
    });

    // Button functions
    window.setLED = function(state) {
      set(ledRef, state);
    };
  </script>

  <style>
    body {
      font-family: Arial;
      text-align: center;
    }
    #led {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      margin: 20px auto;
      background: red;
      box-shadow: 0 0 20px #000;
    }
    button {
      width: 160px;
      height: 45px;
      margin: 8px;
      font-size: 16px;
    }
  </style>
</head>

<body>

<h1>üåç Global Real-Time LED Control</h1>

<div id="led"></div>

<button onclick="setLED('ON')">LED ON</button><br>
<button onclick="setLED('OFF')">LED OFF</button><br>
<button onclick="setLED('BLINK')">LED BLINK</button>

</body>
</html>
